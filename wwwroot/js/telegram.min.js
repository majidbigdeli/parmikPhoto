function urlSafeDecode(n){try{return decodeURIComponent(n)}catch(t){return n}}function urlParseHashParams(n){var t,i,e,f,r,u,o,s;if(n=n.replace(/^#/,""),t={},!n.length)return t;if(n.indexOf("=")<0&&n.indexOf("?")<0)return t._path=urlSafeDecode(n),t;for(i=n.indexOf("?"),i>=0&&(e=n.substr(0,i),t._path=urlSafeDecode(e),n=n.substr(i+1)),f=n.split("&"),r=0;r<f.length;r++)u=f[r].split("="),o=urlSafeDecode(u[0]),s=u[1]==null?null:urlSafeDecode(u[1]),t[o]=s;return t}function urlAppendHashParams(n,t){var r=n.indexOf("#"),i;return r<0?n+"#"+t:(i=n.substr(r+1),i.indexOf("=")>=0||i.indexOf("?")>=0)?n+"&"+t:i.length>0?n+"?"+t:n+t}function postEvent(n,t,i){if(t||(t=function(){}),i===undefined&&(i=""),window.TelegramWebviewProxy!==undefined)TelegramWebviewProxy.postEvent(n,JSON.stringify(i)),t();else if(window.external&&"notify"in window.external)window.external.notify(JSON.stringify({eventType:n,eventData:i})),t();else if(isIframe)try{var r="https://web.telegram.org";r="*";window.parent.postMessage(JSON.stringify({eventType:n,eventData:i}),r)}catch(u){t(u)}else t({notAvailable:!0})}function receiveEvent(n,t){var i=eventHandlers[n],r;if(i!==undefined&&i.length)for(r=0;r<i.length;r++)try{i[r](n,t)}catch(u){}}function onEvent(n,t){eventHandlers[n]===undefined&&(eventHandlers[n]=[]);var i=eventHandlers[n].indexOf(t);i===-1&&eventHandlers[n].push(t)}function offEvent(n,t){if(eventHandlers[n]!==undefined){var i=eventHandlers[n].indexOf(t);i!==-1&&eventHandlers[n].splice(i,1)}}function openProtoUrl(n){if(!n.match(/^(web\+)?tgb?:\/\/./))return!1;var t=!1;try{t=window.open(n,"_blank")}catch(i){t=!1}return t||(location.href=n),!0}var eventHandlers={},locationHash="",initParams,isIframe;try{locationHash=location.hash.toString()}catch(e){}initParams=urlParseHashParams(locationHash);isIframe=!1;try{isIframe=window.parent!=null&&window!=window.parent}catch(e){}window.TelegramGameProxy_receiveEvent=receiveEvent;window.TelegramGameProxy={initParams:initParams,receiveEvent:receiveEvent,onEvent:onEvent,shareScore:function(){postEvent("share_score",function(n){if(n){var t=initParams.tgShareScoreUrl;t&&openProtoUrl(t)}})},_postEvent:postEvent};